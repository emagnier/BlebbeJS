//	BlebbeJS - 2014 - https://github.com/PEMagnier/Blebbe
function blebbe(o,i,h,a){var m=(function(){var y=[[]];return function(z){if(z){y=z;f();}return y;};})();var s=(function(){var y=[0,0,0];return function(z){if(z){y=z;}return y;};})();function c(){var y=m(),z=new Array(y[0].length);y.push(z);m(y);}function e(){var z=0;for(var y=0;y<3;y++){z+=a[y];}var A=1+Math.floor(Math.random()*z);return A>a[0];}function t(){var y=s();return y[1]/a[1]>y[2]/a[2];}var j=(function(){var y=0;return function(z){if(!z){y++;if(typeof z=="number"){y=z;}}return y;};})();var k=(function(){var y=false;return function(z){if(typeof z!="undefined"){y=z;}return y;};})();var u=(function(){var y=false;return function(z){if(typeof z!="undefined"){y=z;}return y;};})();function p(A){var J=m(),I=g(),F=I[1],E=I[2],D=F+E,G=J.length,z=J[0].length;u(true);var C=G-2,B=G-1;function y(){var N=J[C],P,R;for(var S=0;S<z;S++){P=N[S];if(typeof P=="undefined"){if(S<z-1){if(typeof N[S+1]=="undefined"){R=e();if(R){N[S]=-2;N[S+1]=-2;}else{N[S]=-1;}}else{N[S]=-1;}}else{N[S]=-1;}}}var O,M;for(var Q=0;Q<z;Q++){if(N[Q]==-1){O=j();J[C][Q]=O;var L=s();L[0]++;s(L);}else{if(N[Q]==-2){var K;M=t();O=j();J[C][Q]=O;J[C][Q+1]=O;if(M){J[B][Q]=O;J[B][Q+1]=O;K=s();K[2]++;s(K);}else{K=s();K[1]++;s(K);}}}}if(A){if(A>j(true)){H();}}m(J);u(false);}function H(){if(G<2){c();G++;C++;B++;H();}else{var M=true,L;for(var K=0;K<z;K++){L=J[C][K];if(typeof L=="undefined"){M=false;}}if(M){c();G++;C++;B++;H();}else{y();}}}if(D>((G-2)*(I[0]/z))){H();}else{u(false);}}function l(){var y=u();if(y){setTimeout(function(){l();},100);}else{p();}}var n=(function(){var z=document.getElementById(o),y=parseInt(getComputedStyle(z,null).width.replace(/px/,""));return function(A){if(A){y=A;}return y;};})();var q=(function(){var z=document.getElementById(o),y=parseInt(getComputedStyle(z,null).height.replace(/px/,""));return function(A){if(A){y=A;}return y;};})();function g(){var z=document.getElementById("BlebbeJS"),y=[];y[0]=n();y[1]=q();y[2]=z.scrollTop||z.scrollY||$("#BlebbleJS").scrollTop();return y;}var x=(function(){var y=[0];return function(z){if(z){y=z;}return y;};})();function b(){function H(){$("#"+I).animate({top:E,opacity:1},400,"easeOutQuart",function(){});}var F=j(true),B=x(),C=B.length,K=[],z;for(var N=1;N<=F;N++){z=false;for(var M=0;M<C;M++){if(N==B[M]){z=true;}}if(!z){K.push(N);}}var D=g(),P=D[1],O=D[2],J=P+O,y=K.length,G=0,A,E,I;for(var L=0;L<y;L++){I="tuile"+K[L];A=document.getElementById(I);G=parseInt(getComputedStyle(A,null).top.replace(/px/,""));if(G<J){E=parseInt(getComputedStyle(A,null).top.replace(/px/,""));A.style.top=(E+2*parseInt(getComputedStyle(A,null).height.replace(/px/,"")))+"px";H();B.push(K[L]);}}x(B);v();}var d=(function(){var y=[0];return function(z){if(z){y=z;}return y;};})();function f(){function K(aa,Y,Z,W,X){$("#"+aa).animate({top:Y,left:Z,width:W,height:X},400,"easeOutQuart",function(){});}var E=document.getElementById("BlebbeJS"),L=j(true),H=d(),z=H.length,J=[],C;for(var U=1;U<=L;U++){C=false;for(var T=0;T<z;T++){if(U==H[T]){C=true;}}if(!C){J.push(U);}}var N=J.length,A,O=m(),V=O.length,D=O[0].length,G=g(),P=Math.floor(G[0]/D),F,M,y,S=0,I=0;for(var R=0;R<N;R++){for(var Q=0;Q<V;Q++){F=O[Q].indexOf(J[R]);if(F!=-1){M=Q;y=F;Q=V;}}if(R==N-1){var B=document.getElementById("scroll");B.style.top=(M*P+200)+"px";}if(y==D-1){S=P;I=P;}else{if(O[M][y]!=O[M][y+1]){S=P;I=P;}else{S=2*P;if(O[M][y]!=O[M+1][y]){I=P;}else{I=2*P;}}}if(!document.getElementById("tuile"+J[R])){A=document.createElement("div");A.id="tuile"+J[R];A.style.opacity=0;A.style.position="absolute";A.style.top=(M*P)+"px";A.style.left=(y*P)+"px";A.style.width=S+"px";A.style.height=I+"px";E.appendChild(A);}else{K("tuile"+J[R],M*P,y*P,S,I);}H.push(J[R]);}d(H);b();}function v(){var y=m(),A=g(),E=A[1],C=A[2],z=E+C,B=y.length,D=y[0].length;if(z>((B-2)*(A[0]/D))){l();}}var r=(function(){var y=false;return function(z){if(typeof z!="undefined"){y=z;}return y;};})();function w(){function B(F){var G=d(),H=G.indexOf(F);if(H!=-1){k(false);r(false);}else{setTimeout(function(){B(F);},20);}}k(true);var C=document.getElementById("BlebbeJS"),y=1,E=j(true),z=100,A=150;s([0,0,0]);var D=parseInt(getComputedStyle(C,null).width.replace(/px/,""));n(D);q(parseInt(getComputedStyle(C,null).height.replace(/px/,"")));j(0);d([0]);if(D>z){while(D/y>A){y++;}}m([new Array(y)]);p(E);B(E);}(function(){var A=document.getElementById(o),C=document.createElement("div");C.id="BlebbeJS";C.style.width="100%";C.style.height="100%";C.style.position="relative";C.style.overflowX="hidden";C.style.margin=0;C.style.padding=0;A.appendChild(C);var z=parseInt(getComputedStyle(C,null).width.replace(/px/,"")),y=1,B=g(),D=document.createElement("div");D.id="scroll";D.style.width="1px";D.style.height="1px";D.style.opacity=0;D.style.position="absolute";D.style.top=(B[1]+200)+"px";C.appendChild(D);if(z>i){while(z/y>h){y++;}}m([new Array(y)]);v(parseInt(getComputedStyle(C,null).width.replace(/px/,"")));C.addEventListener("scroll",function(){setTimeout(function(){v();b();},100);});window.onresize=function(){var F=k(),E=r();if(F){if(!E){setTimeout(function(){r(true);},1000);r(true);}}else{w();}};})();}